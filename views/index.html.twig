<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">

        <script
        src="https://code.jquery.com/jquery-3.1.1.js"
        integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="
        crossorigin="anonymous"></script>
        <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/slate/bootstrap.min.css" rel="stylesheet" integrity="sha384-RpX8okQqCyUNG7PlOYNybyJXYTtGQH+7rIKiVvg1DLg6jahLEk47VvpUyS+E2/uJ" crossorigin="anonymous">
        <script src="/js/scripts.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <link href="/css/styles.css" rel="stylesheet" type="text/css">
        <title>FEDCUS</title>
    </head>
    <body>
      {% set modal_type = "null" %}
      
        <div class="container">
          <h1><a href="/">FEDCUS Trading System</a></h1>
          <nav class="navbar navbar-inverse">
            <div class="container-fluid">
              <div class="navbar-header">
                <a class="navbar-brand" href="/">Home</a>
              </div>

              <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-2">
                <ul class="nav navbar-nav">
                  <li><a href="/looking">Looking</a></li>
                  <li><a href="/ditching">Ditching</a></li>
                  <li><a href="/rivens">Rivens</a></li>
                </ul>
              </div>
            </div>
          </nav>
          
          
          <div class="row">
            <form class="form-group player" action="/" method="post">
              <label for="player_name">Add a new player</label>
              <input type="text" name="player_name">
              
              <button type = "submit" class="btn btn-success">Add</button>
            </form>
          </div>
          
          
            <div class="row">
              {% for player in players %}
                <table class="table table-striped table-hover ">
                  <thead  class='header-row'>
                    <tr>
                      <th class="player-name">{{player.getName}}</th>
                      <th>
                        <button type="button" class="btn btn-xs btn-info player-edit" value="{{player.getId}}">Edit</button>
                        <form class="form-group tbl-del" action="/delete-player/{{player.getId}}" method="post">
                          <input type="hidden" name="_method" value="delete">
                          <button type="submit" class="btn btn-xs btn-danger" name="button">Remove</button>
                        </form>
                      </th>
                    </tr>
                  </thead>
                  <tbody class="child-tbody">
                    <tr>
                      <td colspan="3">
                          <table class="table table-striped table-hover inner-table">
                            <thead class='header-row'>
                              <tr class="blue">
                                <th class="count-col">#</th>
                                <th>Looking For:</th>
                                <th class="al_right">Count:</th>
                                <th class="button-col">
                                  <button type="button" class="btn btn-xs btn-success add-item buy-item" data-toggle="modal" data-target="#buyModal" value="buy-{{player.getId}}">Add Item</button>
                                </th>
                              </tr>
                              
                            </thead>
                            <tbody>
                              {% set itemcount = 0 %}
                              {% for item in player.findBuyItems %}
                              {% set itemcount = itemcount + 1%}
                              <tr>
                                <td class="count-col">{{itemcount}}</td>
                                <td>{{item.getName}}</td>
                                <td class="al_right">{{item.getCount}}</td>
                                <td class="button-col">
                                  <!-- <button type="button" class="btn btn-xs btn-info buy-edit" value="{{item.getId}}">Edit</button> -->
                                  <form class="form-group tbl-del" action="/delete-buy-item/{{item.getId}}" method="post">
                                    <input type="hidden" name="_method" value="delete">
                                    <button type="submit" class="btn btn-xs btn-danger" name="button">Remove</button>
                                  </form>
                                </td>
                              </tr>
                              {%endfor%}
                            </tbody>
                          </table>
                      </td>
                    </tr>
                    <tr>
                      <td colspan="3">
                          <table class="table table-striped table-hover inner-table">
                            <thead  class='header-row'>
                              <tr class="blue">
                                <th class="count-col">#</th>
                                <th>Up for grabs:</th>
                                <th class="al_right">Count:</th>
                                <th class="button-col">
                                  <button type="button" class="btn btn-xs btn-success add-item sell-item" data-toggle="modal" data-target="#buyModal" value="sell-{{player.getId}}">Add Item</button>
                                </th>
                              </tr>
                              
                            </thead>
                            <tbody>
                              {% set sellitemcount = 0 %}
                              {% for item in player.findSellItems %}
                              {% set sellitemcount = sellitemcount + 1%}
                              <tr>
                                <td class="count-col">{{sellitemcount}}</td>
                                <td>{{item.getName}}</td>
                                <td class="al_right">{{item.getCount}}</td>
                                <td class="button-col">
                                  <!-- <button type="button" class="btn btn-xs btn-info sell-edit" value="{{item.getId}}">Edit</button> -->
                                  <form class="form-group tbl-del" action="/delete-sell-item/{{item.getId}}" method="post">
                                    <input type="hidden" name="_method" value="delete">
                                    <button type="submit" class="btn btn-xs btn-danger" name="button">Remove</button>
                                  </form>
                                </td>
                              </tr>
                              {%endfor%}
                            </tbody>
                          </table>
                      </td>
                    </tr>
                    <tr>
                      <td colspan="3">
                          <table class="table table-striped table-hover inner-table">
                            <thead  class='header-row'>
                              <tr class="blue">
                                <th class="count-col">#</th>
                                <th>Rivens:</th>
                                <th>Stat 1:</th>
                                <th>Stat 2:</th>
                                <th>Stat 3:</th>
                                <th>Stat 4:</th>
                                <th>MR:</th>
                                <th>Reroll Count:</th>
                                <th class="button-col">
                                  <button type="button" class="btn btn-xs btn-success add-item sell-item" data-toggle="modal" data-target="#rivenModal" value="{{player.getId}}">Add Riven</button>
                                </th>
                              </tr>
                              
                            </thead>
                            <tbody>
                              {% set rivencount = 0 %}
                              {% for item in player.findRivens %}
                              {% set rivencount = rivencount + 1%}
                              <tr>
                                <td class="count-col">{{rivencount}}</td>
                                <td>{{item.getName}}</td>
                                <td>{{item.getStat1}}</td>
                                <td>{{item.getStat2}}</td>
                                <td>{{item.getStat3}}</td>
                                <td>{{item.getStat4}}</td>
                                <td>{{item.getMR}}</td>
                                <td>{{item.getReroll}}</td>
                                <td class="button-col">
                                  <!-- <button type="button" class="btn btn-xs btn-info riven-edit" value="{{item.getId}}">Edit</button> -->
                                  <form class="form-group tbl-del" action="/delete-riven/{{item.getId}}" method="post">
                                    <input type="hidden" name="_method" value="delete">
                                    <button type="submit" class="btn btn-xs btn-danger" name="button">Remove</button>
                                  </form>
                                </td>
                              </tr>
                              {%endfor%}
                            </tbody>
                          </table>
                      </td>
                    </tr>
                  </tbody>
                </table>
              {%endfor%}
            </div>
            
            <!-- <form class="form-group client" action="/deleteAll" method="post">
              <button type = "submit" class="btn btn-danger">Purge All</button>
            </form> -->
        </div>

      <!-- Riven Modal -->
      <div class="modal fade" id="rivenModal" tabindex="-1" role="dialog" aria-labelledby="rivenModalLabel">
        <div class="modal-dialog" role="document">
          <div class="modal-content form-group">
            <form class="form-group" action="/add-riven" method="post">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Enter Item Info</h4>
              </div>
              <div class="modal-body">
                    <div class="form-group">
                      <script type="text/javascript">
                      $('#rivenModal').on('show.bs.modal', function (e) {
                        var invoker = $(e.relatedTarget);
                        var owner = invoker.val();
                        document.getElementById("riven_owner").value = owner;
                        });
                      </script>
                        <label class="control-label" for="riven_name">Name:</label>
                        <input class="form-control" name="riven_name" id="riven_name" required>
                        <label class="control-label" for="item_stat1">Stat 1:</label>
                        <input class="form-control" name="item_stat1" id="item_stat1">
                        <label class="control-label" for="item_stat2">Stat 2:</label>
                        <input class="form-control" name="item_stat2" id="item_stat2">
                        <label class="control-label" for="item_stat3">Stat 3:</label>
                        <input class="form-control" name="item_stat3" id="item_stat3">
                        <label class="control-label" for="item_stat4">Stat 4:</label>
                        <input class="form-control" name="item_stat4" id="item_stat4">
                        <label class="control-label" for="item_mr">MR:</label>
                        <input class="form-control" name="item_mr" id="item_mr">
                        <label class="control-label" for="item_reroll">Reroll:</label>
                        <input class="form-control" name="item_reroll" id="item_reroll">
                        <input type='hidden' name="item_owner" id="riven_owner">
                    </div>
              </div>
            <div class="modal-footer">
              <button class="btn btn-primary btn-success" type="submit" name="button">Submit Riven</button>
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </form>
    </div>
    
      <!-- item Modal -->
      <div class="modal fade" id="buyModal" tabindex="-1" role="dialog" aria-labelledby="buyModalLabel">
        <div class="modal-dialog" role="document">
          <div class="modal-content form-group">
            <form class="form-group" action="/add-item" method="post">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Enter Item Info</h4>
              </div>
              <div class="modal-body">
                    <div class="form-group">
                      <script type="text/javascript">
                      $('#buyModal').on('show.bs.modal', function (e) {
                        var invoker = $(e.relatedTarget);
                        var presplit = invoker.val();
                        var split = presplit.split("-");
                        var owner = split[1];
                        var type = split[0];
                        
                        document.getElementById("modal_type").value = type;
                        document.getElementById("item_owner").value = owner;
                        });
                      </script>
                        <label class="control-label" for="item_name">Name:</label>
                        <input class="form-control" name="item_name" id="item_name" required>
                        <label class="control-label" for="item_count">How Many:</label>
                        <input type="number" class="form-control" name="item_count" id="item_count">
                        <input type='hidden' name="item_owner" id="item_owner">
                        <input type='hidden' name="modal_type" id="modal_type">
                    </div>
              </div>
            <div class="modal-footer">
              <button class="btn btn-primary btn-success" type="submit" name="button">Submit Item</button>
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </form>
    </div>
    </body>
</html>
